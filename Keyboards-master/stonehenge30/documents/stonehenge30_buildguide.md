# Stonehenge30 ビルドガイド

- [Stonehenge30 ビルドガイド](#stonehenge30-%E3%83%93%E3%83%AB%E3%83%89%E3%82%AC%E3%82%A4%E3%83%89)
  - [パーツ一覧](#%E3%83%91%E3%83%BC%E3%83%84%E4%B8%80%E8%A6%A7)
    - [キット付属品](#%E3%82%AD%E3%83%83%E3%83%88%E4%BB%98%E5%B1%9E%E5%93%81)
    - [キット以外に必要なもの](#%E3%82%AD%E3%83%83%E3%83%88%E4%BB%A5%E5%A4%96%E3%81%AB%E5%BF%85%E8%A6%81%E3%81%AA%E3%82%82%E3%81%AE)
    - [補足](#%E8%A3%9C%E8%B6%B3)
  - [組み立て](#%E7%B5%84%E3%81%BF%E7%AB%8B%E3%81%A6)
  - [Pro Microの準備](#pro-micro%E3%81%AE%E6%BA%96%E5%82%99)
    - [ファームウェアを書き込む](#%E3%83%95%E3%82%A1%E3%83%BC%E3%83%A0%E3%82%A6%E3%82%A7%E3%82%A2%E3%82%92%E6%9B%B8%E3%81%8D%E8%BE%BC%E3%82%80)
    - [Pro Microの向き](#pro-micro%E3%81%AE%E5%90%91%E3%81%8D)
  - [基板の裏と表について](#%E5%9F%BA%E6%9D%BF%E3%81%AE%E8%A3%8F%E3%81%A8%E8%A1%A8%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6)
  - [ダイオードをはんだ付けする](#%E3%83%80%E3%82%A4%E3%82%AA%E3%83%BC%E3%83%89%E3%82%92%E3%81%AF%E3%82%93%E3%81%A0%E4%BB%98%E3%81%91%E3%81%99%E3%82%8B)
    - [ダイオードの脚を曲げる](#%E3%83%80%E3%82%A4%E3%82%AA%E3%83%BC%E3%83%89%E3%81%AE%E8%84%9A%E3%82%92%E6%9B%B2%E3%81%92%E3%82%8B)
    - [ダイオードのはんだ付け](#%E3%83%80%E3%82%A4%E3%82%AA%E3%83%BC%E3%83%89%E3%81%AE%E3%81%AF%E3%82%93%E3%81%A0%E4%BB%98%E3%81%91)
  - [タクトスイッチをはんだ付けする](#%E3%82%BF%E3%82%AF%E3%83%88%E3%82%B9%E3%82%A4%E3%83%83%E3%83%81%E3%82%92%E3%81%AF%E3%82%93%E3%81%A0%E4%BB%98%E3%81%91%E3%81%99%E3%82%8B)
  - [スイッチをはんだ付けする](#%E3%82%B9%E3%82%A4%E3%83%83%E3%83%81%E3%82%92%E3%81%AF%E3%82%93%E3%81%A0%E4%BB%98%E3%81%91%E3%81%99%E3%82%8B)
  - [*(オプション)UnderglowLEDをはんだ付けする*](#%E3%82%AA%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3underglowled%E3%82%92%E3%81%AF%E3%82%93%E3%81%A0%E4%BB%98%E3%81%91%E3%81%99%E3%82%8B)
    - [頒布試作機版の注意点](#%E9%A0%92%E5%B8%83%E8%A9%A6%E4%BD%9C%E6%A9%9F%E7%89%88%E3%81%AE%E6%B3%A8%E6%84%8F%E7%82%B9)
  - [キーキャップの取り付け](#%E3%82%AD%E3%83%BC%E3%82%AD%E3%83%A3%E3%83%83%E3%83%97%E3%81%AE%E5%8F%96%E3%82%8A%E4%BB%98%E3%81%91)
  - [脚の取り付け](#%E8%84%9A%E3%81%AE%E5%8F%96%E3%82%8A%E4%BB%98%E3%81%91)
  - [完成！](#%E5%AE%8C%E6%88%90)
  - [トラブルシューティング](#%E3%83%88%E3%83%A9%E3%83%96%E3%83%AB%E3%82%B7%E3%83%A5%E3%83%BC%E3%83%86%E3%82%A3%E3%83%B3%E3%82%B0)

他リンク  
[Troubleshooting](../../troubleshooting.md)  
[Firmware](https://github.com/marksard/qmk_firmware/tree/my_customize/keyboards/treadstone48)  
[Hardware data](https://github.com/marksard/Keyboards/tree/master/treadstone48/)  
[About Treadstone48](https://marksard.github.io/2018/12/17/about-treadstone48/)  

## パーツ一覧

### キット付属品

| 名前 | 数 | 備考 |
| ---- | ---- | --- |
| PCB | 1枚 | |

### キット以外に必要なもの

| 名前 | 数 | 備考 |
| ---- | ---- | --- |
| ダイオード | 30個 |  |
| タクトスイッチ | 1個 | |
| キースイッチ | 30個 | MX、LowProfile、Alps（未検証） |
| キーキャップ | 30個 | スイッチにあった規格のもの |
| Pro Micro | 1個 | |
| スプリングピンヘッダ 12P | 2個 | 交換や確認にも便利なので必須と言っていいくらい推奨 |
| *LEDストリップ（WS2812B 6個付き）* | *2個* | *Underglow用（オプション）* |
| MicroUSBケーブル | 1本 | キーボードとPC接続用 |

### 補足

## 組み立て

　組み立ての時間は1～3時間くらいが目安です。  

## Pro Microの準備

### ファームウェアを書き込む

　Pro Microに先にファームを書き込んでしまいます。はやる気持ちを抑えて最初にソフトウェアの準備と書き込みをしてしまえば、完成後すぐ使用できます。  

  Stonehenge30は本家QMKにマージしておりませんので、私のフォークリポジトリの**my_customize**ブランチにあるものをお使いください。  
  [marksard/qmk_firmware](https://github.com/marksard/qmk_firmware/tree/my_customize)

　Stonehenge30のキーマップのmakeは ```make stonehenge30:like_jis``` で可能です。（Linux、Mac、MSYS2環境上なら ```make stonehenge30:like_jis:avrdude``` で書き込みも出来ます）  
　キーマップについての解説は[ここにあります](https://github.com/marksard/qmk_firmware/blob/my_customize/keyboards/stonehenge30/keymaps/like_jis/readme_jp.md)。  

### Pro Microの向き

　Helix、crkbd、Treadstone48などと同様、部品が実装されていない面を上にしてください。  

![img](_image/20190202-P2020243.jpg)  

## 基板の裏と表について

　キースイッチが乗り、通常使用する際上を向く面を表、逆を裏とします。  
　stonehenge30の場合、stonehenge30と印刷の入ったほうが表になります。  

![img](_image/20190202-P2020237.jpg)  
![img](_image/20190202-P2020238.jpg)  

## ダイオードをはんだ付けする

### ダイオードの脚を曲げる

　基板に付ける前にダイオードの脚を全部曲げてしまいます。基板の穴の間隔を見極めて曲げるための冶具を探してみてください。繋がったままの割りばしなどでも良いと思います。  
　私はUSB-C to USB-Aの変換コネクタが丁度いい感じに使えたので、ダイオードを2,3個いっぺんに曲げていきました。  

![img](../../treadstone48/documents/_image/20181216-PC160164.jpg)  

### ダイオードのはんだ付け

　ダイオードの実装はオモテ面をデフォルトにしています。  
　黒い帯を下側にしてはんだ付けしてください。シルク印刷がデザインでつぶれている箇所含めすべて同じ向きです。  

![img](_image/IMG_8447.jpg)  
![img](_image/20190202-P2020239.jpg)  

![img](../../treadstone48/documents/_image/diode.png)  

## タクトスイッチをはんだ付けする

　リセット用のタクトスイッチをオモテ面に取り付けてください。  

## スイッチをはんだ付けする

　プレートがないのでスイッチが斜めにつかないように注意して取り付けます。5ピンあるPCBマウント用スイッチを使用してください。

![img](_image/20190202-P2020242.jpg)  

もしご家庭にマウントプレートが余っているならこんな感じでスイッチを整列させて何個か一気にやるという手も。  

![img](_image/20190202-P2020240.jpg)  

## *(オプション)UnderglowLEDをはんだ付けする*

　ストリップLEDを付ける位置は、ウラ面の上段左側、下段右側の二か所あります。接続はpro micro→上段左→下段右の順になっていて、下段右側の取り付け位置のランドは、上段左側のLEDを取り付けないと通電しないようになっています。  

　テープLEDの剥離紙の両端数cmだけハサミなどでカットします。  

![img](../../treadstone48/documents/_image/20181216-PC160176.jpg)  

　上段左のLEDは左右端をはんだ付けします。下段右側は左端のみはんだします。  

![img](_image/20190203-P2030270.jpg)  

### 頒布試作機版の注意点

　まずシルクがないです…LED側のGND、DIN、5Vを上段左のランドにはんだします…が、5VとGNDの配線パターンにミスがあり逆になっています。うまい具合に配線剤を使ってクロスして取り付けてください。このときストリップLEDのシール側の金色の部分にハンダが接触するとショートする可能性があるので、金色の部分は剥離紙を被せておくと良いです。  

![img](_image/20190203-P2030274.jpg)  

## キーキャップの取り付け

　お好みのキーキャップを取り付けてください。  

## 脚の取り付け

　お好みの脚を付けてください。クッションゴムシートを直接取り付ける場合、ゴムの厚みが薄いと下面のハンダで机が傷付くため、ハンダした箇所をキレイに処理したうえで干渉しない厚さのゴムシートをお使いください。  
　角かそれに近い4箇所は必須で、PCB自体が結構柔らかいので打鍵感を見ながら追加で貼ると良いと思います。  

　参考までに、下の作例写真では戸当のネジ穴のあるゴムと、両端ネジ穴のある8mmスペーサーを使って8箇所脚を作っています。  

![img](_image/20190203-P2030276.jpg)  

## 完成！

　チェックして問題なさそうなら完成です！あなただけの一台に仕上げてください！

![img](_image/20190202-P2020255.jpg)  
![img](_image/20190203-P2030266.jpg)  
![img](_image/20190211-P2110297.jpg)  

## トラブルシューティング

[トラブルシューティング](../../troubleshooting.md)ページを参考にしてください。  
